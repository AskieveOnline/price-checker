<!DOCTYPE html>
<html>
<head>
    <title>Lowest Price Finder</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }
        input { padding: 10px; width: 300px; }
        button { padding: 10px 20px; background: #4285F4; color: white; border: none; }
        #result { margin-top: 20px; font-weight: bold; }
    </style>
</head>
<body>
    <h1>Find the Lowest Price on Google Shopping</h1>
    <input type="text" id="product" placeholder="Enter product (e.g., iPhone 15)">
    <button onclick="searchPrice()">Search</button>
    <div id="result"></div>

    <script>
        async function searchPrice() {
            const product = document.getElementById("product").value;
            const resultDiv = document.getElementById("result");
            resultDiv.innerHTML = "Searching...";

            // Replace with your ScraperAPI key
            const API_KEY = "a4ee6156c39a100b5d4fb2727240e9f9"; 
            const encodedProduct = encodeURIComponent(product);
            
            try {
                // ScraperAPI call to Google Shopping
                const response = await fetch(
                    `https://api.scraperapi.com/?api_key=${API_KEY}&url=https://www.google.com/search?q=${encodedProduct}&tbm=shop`
                );
                const html = await response.text();

                // Parse HTML to extract prices (simplified)
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, "text/html");
                const prices = Array.from(doc.querySelectorAll(".a8Pemb")).map(el => el.textContent.trim());

                if (prices.length > 0) {
                    const numericPrices = prices.map(p => parseFloat(p.replace(/[^0-9.]/g, "")));
                    const lowestPrice = Math.min(...numericPrices);
                    resultDiv.innerHTML = `Lowest Price: $${lowestPrice}`;
                } else {
                    resultDiv.innerHTML = "No prices found. Try another product.";
                }
            } catch (error) {
                resultDiv.innerHTML = "Error fetching data. Try again later.";
                console.error(error);
            }
        }
    </script>
</body>
</html>
